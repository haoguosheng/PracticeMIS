<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      >
    <f:loadBundle  basename="messages" var="msgs"/>
    <h:head></h:head>
    <body>
        <ui:composition template="./../noLogin/myTemplate2.xhtml">
            <ui:define name="content">
                <h1><h:outputLabel value="#{msgs.submitTeaReport}"/> </h1>
                <h:messages  style="color: red" id="latestMessage"/>
                <h:form >
                    <h:panelGrid columns="2">
                        <h:outputLabel value="#{msgs.selectCity}" />
                        <h:selectOneMenu value="#{userinfoBean.cityId}" required="true">
                            <f:selectItem  itemValue="null" itemLabel="#{msgs.pleaseSelect}" />
                            <f:selectItems value="#{cityBackingBean.cityMap}"/>
                            <f:ajax render="students" event="change"/>
                        </h:selectOneMenu>
                        <h:outputLabel value="#{msgs.selectStudents}"/>
                        <h:selectOneMenu  value="#{checkRecordBean.studentNo}" id="students" required="true">
                            <f:selectItem  itemValue="null" itemLabel="#{msgs.pleaseSelect}"/>
                            <f:selectItems value="#{userinfoBean.studentMap}"/>
                            <f:ajax event="change" render="studentReport" />
                        </h:selectOneMenu>
                        <h:outputLabel value="#{msgs.submittedNote}:"/>
                        <h:panelGrid  id="studentReport">
                            <h:outputLabel value=""  rendered="#{checkRecordBean.practiceList.size()==0}" id="tem" />
                            <h:panelGrid columns="1" rendered="#{checkRecordBean.practiceList.size()>0}"  >
                                <c:forEach items="#{checkRecordBean.practiceList}" var="submitted">
                                    <h:commandLink action="#{teachSeeReport.directToNote()}" value="#{submitted.submitdate.year+1900}年#{submitted.submitdate.month+1}月#{submitted.submitdate.date}日">
                                        <f:param value="#{submitted.submitdate}" name="submitDate"/>
                                        <f:param value="#{checkRecordBean.studentNo}" name="studentNo"/>
                                    </h:commandLink>
                                </c:forEach>
                            </h:panelGrid>
                        </h:panelGrid>
                    </h:panelGrid>
                    <h:panelGrid columns="2">
                        <h:outputLabel value="#{msgs.time}"></h:outputLabel>
                        <h:panelGrid columns="6">
                            <h:selectOneMenu value="#{checkRecordBean.year}" id="year" >
                                <f:selectItems  value="#{publicFields.yearMap}"/>
                            </h:selectOneMenu>
                            <h:outputLabel value="#{msgs.year}"/>
                            <h:selectOneMenu value="#{checkRecordBean.month}" id="month" >
                                <f:selectItems  value="#{publicFields.monthMap}"/>
                                <f:ajax render="day" execute="month"/>
                            </h:selectOneMenu>
                            <h:outputLabel value="#{msgs.month}"/>
                            <h:selectOneMenu value="#{checkRecordBean.day}" id="day" >
                                <f:selectItems  value="#{checkRecordBean.dayMap}"/>
                            </h:selectOneMenu>
                            <h:outputLabel value="#{msgs.day}"/>
                        </h:panelGrid>
                        <h:outputLabel value="#{msgs.content}" />
                        <h:inputTextarea value="#{checkRecordBean.checkrecords.checkcontent}"  rows="10" cols="60"/>
                        <h:outputLabel value="#{msgs.recommendation}" />
                        <h:inputTextarea value="#{checkRecordBean.checkrecords.recommendation}"  rows="10"  cols="60"/>
                        <h:outputLabel value="#{msgs.rank}" />
                        <h:selectOneMenu value="#{checkRecordBean.checkrecords.rank}" id="rank" >
                            <f:selectItems  value="#{checkRecordBean.rankMap}"/>
                        </h:selectOneMenu>
                        <h:outputLabel value="#{msgs.remark}" />
                        <h:inputTextarea value="#{checkRecordBean.checkrecords.remark}"  rows="10" cols="60"/>
                        <h:commandButton action="#{checkRecordBean.addCheckRecord()}" value="#{msgs.submit}"/>
                    </h:panelGrid>
                </h:form>
            </ui:define>
        </ui:composition>

    </body>
</html>
